# Queue并发集合

之前，我们介绍了Queue队列。对于队列的相关知识，你应该有了一个大概的了解！

在本篇中，我们会继续深入学习，来了解下线程安全的队列集合！

在Java多线程编程中，生产者消费者模型，想必大家都在熟悉不过了，简单来说就是一部分线程负责向容器中生产，而另一部分线程负责从容器中获取。

在这个模型当中，Java主要利用队列的数据结构进行实现。为了保证数据的安全，Java提供了两种线程安全的Queue队列，分为**阻塞队列**和**非阻塞队列**（并发队列）。

其中，阻塞队列典型的实现类是**BlockingQueue（接口）--ArrayBlockingQueue实现类**，而非阻塞队列典型的实现类就是**ConcurrentLinkedQuue**。

下面，我们就具体来说说阻塞队列额非阻塞队列的不同实现！

## 1.1 阻塞队列

在具体讲解阻塞队列之前，需要先跟大家明确一个概念！

**什么是阻塞队列？**

阻塞，顾名思义：当我们的生产者向队列中生产数据时，若队列已满，那么生产线程会暂停下来，直到队列中有可以存放数据的地方，才会继续工作；而当我们的消费者向队列中获取数据时，若队列为空，则消费者线程会暂停下来，直到容器中有元素出现，才能进行获取操作。

这就是阻塞队列。

直白的来说：队列满时，生产线程停止生产；队列空时，消费线程停止活动。

**阻塞队列怎么进行阻塞操作**

对于队列（集合）来说，最常用的操作，无疑只有两类，一种是添加操作，一种是移除操作！

### 1.1.1 当添加时，队列怎么处理？

```java
add(e):队列满时，抛出异常；

offer(e):队列满时，返回false；

put(e)：队列满时，线程一直阻塞；

offer(e,time,unit):队列满时，线程先阻塞一段时间，超时则直接返回。
```

### 1.1.2 当移除时，队列如何处理？

```csharp
remove():队列空时，抛出异常；

poll():队列空时，返回null；

take():队列空时，线程一直阻塞；

poll(time,unit):队列空时，线程被阻塞一段时间，超时则直接返回。
```

以上就是，阻塞队列在队列已满，或者队列为空时，再继续调用添加方法，或者移除方法时，所进行的逻辑处理。

**有哪些阻塞队列？**

在Java中，java.util.concurrent包提供了很多阻塞队列的实现。

其中，包括：

**ArrayBlockingQueue：一个由数组结构组成的有界阻塞队列。**

**LinkedBlockingQueue：一个由链表结构组成的有界阻塞队列。**

**PriorityBlockingQueue：一个支持优先级排序的无界阻塞队列。**

**LinkedTransferQueue：一个由链表结构组成的无界阻塞队列。**

**LinkedBlockingDeque：一个由链表结构组成的双向阻塞队列。**

接下来，我们就对以上阻塞队列进行一一说明，其中主要介绍下ArrayBlockingQueue。


原文链接：https://www.jianshu.com/p/9dde7f4cedf6
